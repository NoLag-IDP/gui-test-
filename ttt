---------------- Services / Remotes ----------------
local RS = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer

local CONCH = RS:WaitForChild("conch_networking", 5)
local INVOKE = CONCH and CONCH:WaitForChild("invoke_server_command", 5)

---------------- Invoke mapping ----------------
-- TODO: Replace the placeholders with actual server invoke IDs
local INVOKE_ID = {
    spawnbrainrot = 1,        -- Confirm actual ID
    executeallevents = 1,     -- Confirm actual ID
    executeevent = 1,         -- Confirm actual ID
    setmoney = 1,             -- Confirm actual ID
    setrebirth = 1,           -- Confirm actual ID
    spawnluckyblock = 1,      -- Confirm actual ID
}

---------------- Data ----------------
local EVENT_LIST = {
  "10B Visits","4th of July","Bombardiro Crocodilo","Chicleteira Bicicleteira","Crab Rave",
  "La Vacca Saturno Saturnita","Los Matteos","Nyan Cats","Phase 1: Sleepy","Phase 2: Galaxy Introduction",
  "Phase 3: Sammy's Base","Phase 4: Mygame43","Phase 5: Sammy Snap","Raining Tacos","Rap Concert",
  "Sammyni Spyderini","Solar Flare","Tung Tung Attack","1MEvent","300K","Brazil","Bubblegum","Candy",
  "Concert","DulDulDul","Extinct","FatSammy","Galaxy","Glitch","Matteo","Mexico","Molten","Pinata",
  "Rain","Rainbow","Snow","Starfall","Stock","Strawberry","UFO","Water","YinYang","x4Event","x6Event",
  "x8Event","Indonesia","Meowl"
}

---------------- Utils ----------------
local function sendInvokeExact(name, args_tbl)
    if not INVOKE then return false, "invoke_remote_not_found" end
    local payload = {invoke_id = INVOKE_ID[name] or 1, name = name, args = args_tbl or {}}
    local ok, err = pcall(function() INVOKE:FireServer(payload) end)
    return ok, ok and "invoke" or tostring(err)
end

local function parseNumber(txt)
    txt = tostring(txt or ""):gsub("[^%d%-%.]", "")
    return tonumber(txt) or 0
end

---------------- GUI ----------------
if game.CoreGui:FindFirstChild("AdminPanelGUI") then
    game.CoreGui.AdminPanelGUI:Destroy()
end

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AdminPanelGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.IgnoreGuiInset = true
ScreenGui.Parent = game.CoreGui

local outlineFrame = Instance.new("Frame")
outlineFrame.Size = UDim2.new(0, 520, 0, 380)
outlineFrame.Position = UDim2.new(0, 50, 0.5, -190)
outlineFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
outlineFrame.BorderSizePixel = 0
outlineFrame.Parent = ScreenGui

local outlineCorner = Instance.new("UICorner")
outlineCorner.CornerRadius = UDim.new(0, 10)
outlineCorner.Parent = outlineFrame

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(1, -6, 1, -6)
mainFrame.Position = UDim2.new(0, 3, 0, 3)
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = outlineFrame

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 10)
mainCorner.Parent = mainFrame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(0, 200, 0, 40)
title.Position = UDim2.new(0.05, 0, 0, 6)
title.BackgroundTransparency = 1
title.Text = "Admin Panel"
title.Font = Enum.Font.GothamBold
title.TextSize = 28
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = mainFrame

local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Size = UDim2.new(0,36,0,28)
minimizeBtn.Position = UDim2.new(1,-44,0,8)
minimizeBtn.BackgroundColor3 = Color3.fromRGB(180,30,30)
minimizeBtn.Text = "—"
minimizeBtn.Font = Enum.Font.GothamBold
minimizeBtn.TextSize = 18
minimizeBtn.TextColor3 = Color3.fromRGB(255,255,255)
minimizeBtn.BorderSizePixel = 0
minimizeBtn.Parent = mainFrame

local minCorner = Instance.new("UICorner")
minCorner.CornerRadius = UDim.new(0,6)
minCorner.Parent = minimizeBtn

-- Generic button creation
local function createButton(name, leftSide, yOffset)
    local btn = Instance.new("TextButton")
    btn.Text = name
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 18
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.BackgroundColor3 = Color3.fromRGB(255,100,100)
    btn.Size = UDim2.new(0, 200, 0, 50)
    btn.Position = UDim2.new(leftSide and 0.05 or 0.55, 0, 0, yOffset)
    btn.Parent = mainFrame

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0,8)
    corner.Parent = btn

    btn.MouseEnter:Connect(function() btn.BackgroundColor3 = Color3.fromRGB(255,80,80) end)
    btn.MouseLeave:Connect(function() btn.BackgroundColor3 = Color3.fromRGB(255,100,100) end)

    return btn
end

-- Buttons
local spawnBrainrotsBtn = createButton("Spawn Brainrots", true, 60)
local executeAllEventsBtn = createButton("Execute All Events", false, 60)
local executeEventsBtn = createButton("Execute Events", true, 130)
local spawnLuckyBlockBtn = createButton("Spawn Any Lucky Block", false, 130)
local addMoneyBtn = createButton("Add Money", true, 200)
local setRebirthBtn = createButton("Set Rebirth", false, 200)

-- TextBoxes
local moneyBox = Instance.new("TextBox")
moneyBox.PlaceholderText = "Insert Money Here"
moneyBox.Font = Enum.Font.Gotham
moneyBox.TextSize = 18
moneyBox.TextColor3 = Color3.fromRGB(255,255,255)
moneyBox.BackgroundColor3 = Color3.fromRGB(50,50,50)
moneyBox.Size = UDim2.new(0,200,0,50)
moneyBox.Position = UDim2.new(0.05,0,0,270)
moneyBox.Parent = mainFrame

local rebirthBox = Instance.new("TextBox")
rebirthBox.PlaceholderText = "Insert Rebirth Here"
rebirthBox.Font = Enum.Font.Gotham
rebirthBox.TextSize = 18
rebirthBox.TextColor3 = Color3.fromRGB(255,255,255)
rebirthBox.BackgroundColor3 = Color3.fromRGB(50,50,50)
rebirthBox.Size = UDim2.new(0,200,0,50)
rebirthBox.Position = UDim2.new(0.55,0,0,270)
rebirthBox.Parent = mainFrame

-- Footer
local madeBy = Instance.new("TextLabel")
madeBy.Size = UDim2.new(1,0,0,30)
madeBy.Position = UDim2.new(0,0,1,-30)
madeBy.BackgroundTransparency = 1
madeBy.Text = ".gg/M64MsM7E6V"
madeBy.Font = Enum.Font.Gotham
madeBy.TextSize = 14
madeBy.TextColor3 = Color3.fromRGB(255,255,255)
madeBy.Parent = mainFrame

-- Minimize Logic
local minimized = false
local fullSize = outlineFrame.Size
minimizeBtn.MouseButton1Click:Connect(function()
    minimized = not minimized
    for _,v in pairs({spawnBrainrotsBtn, executeAllEventsBtn, executeEventsBtn, spawnLuckyBlockBtn, addMoneyBtn, setRebirthBtn, moneyBox, rebirthBox, madeBy}) do
        v.Visible = not minimized
    end
    TweenService:Create(outlineFrame,TweenInfo.new(0.3),{Size=minimized and UDim2.new(0,520,0,60) or fullSize}):Play()
end)

---------------- Button Click Events ----------------

-- Execute All Events
executeAllEventsBtn.MouseButton1Click:Connect(function()
    local ok, err = sendInvokeExact("executeallevents", {})
    if ok then
        print("Executed all events")
    else
        warn("Failed to execute all events:", err)
    end
end)

-- Execute Specific Event
executeEventsBtn.MouseButton1Click:Connect(function()
    -- Destroy old GUI if it exists
    if game.CoreGui:FindFirstChild("ExecuteEventGUI") then
        game.CoreGui.ExecuteEventGUI:Destroy()
    end

    local popupGui = Instance.new("ScreenGui")
    popupGui.Name = "ExecuteEventGUI"
    popupGui.ResetOnSpawn = false
    popupGui.IgnoreGuiInset = true
    popupGui.Parent = game.CoreGui

    local outlineFrame = Instance.new("Frame")
    outlineFrame.Size = UDim2.new(0,450,0,300)
    outlineFrame.AnchorPoint = Vector2.new(0.5,0.5)
    outlineFrame.Position = UDim2.new(0.5,0,0.5,0)
    outlineFrame.BackgroundColor3 = Color3.fromRGB(255,255,255)
    outlineFrame.BorderSizePixel = 0
    outlineFrame.Parent = popupGui

    local outlineCorner = Instance.new("UICorner")
    outlineCorner.CornerRadius = UDim.new(0,10)
    outlineCorner.Parent = outlineFrame

    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(1,-6,1,-6)
    mainFrame.Position = UDim2.new(0,3,0,3)
    mainFrame.BackgroundColor3 = Color3.fromRGB(40,40,40)
    mainFrame.BorderSizePixel = 0
    mainFrame.Parent = outlineFrame

    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = UDim.new(0,8)
    mainCorner.Parent = mainFrame

    -- Title
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1,-60,0,40)
    title.Position = UDim2.new(0,10,0,5)
    title.BackgroundTransparency = 1
    title.Text = "Execute Event"
    title.Font = Enum.Font.GothamBold
    title.TextSize = 24
    title.TextColor3 = Color3.fromRGB(255,255,255)
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.Parent = mainFrame

    -- Close button
    local destroyBtn = Instance.new("TextButton")
    destroyBtn.Size = UDim2.new(0,30,0,30)
    destroyBtn.Position = UDim2.new(1,-40,0,8)
    destroyBtn.BackgroundColor3 = Color3.fromRGB(180,30,30)
    destroyBtn.Text = "X"
    destroyBtn.Font = Enum.Font.GothamBold
    destroyBtn.TextSize = 18
    destroyBtn.TextColor3 = Color3.fromRGB(255,255,255)
    destroyBtn.BorderSizePixel = 0
    destroyBtn.Parent = mainFrame

    local destroyCorner = Instance.new("UICorner")
    destroyCorner.CornerRadius = UDim.new(0,6)
    destroyCorner.Parent = destroyBtn

    destroyBtn.MouseButton1Click:Connect(function()
        popupGui:Destroy()
    end)

    -- Dropdown selection button
    local selectBtn = Instance.new("TextButton")
    selectBtn.Size = UDim2.new(1,-40,0,40)
    selectBtn.Position = UDim2.new(0,20,0,50)
    selectBtn.BackgroundColor3 = Color3.fromRGB(60,60,60)
    selectBtn.Text = "Select Event ▼"
    selectBtn.Font = Enum.Font.GothamBold
    selectBtn.TextSize = 18
    selectBtn.TextColor3 = Color3.fromRGB(255,255,255)
    selectBtn.BorderSizePixel = 0
    selectBtn.Parent = mainFrame

    local selectCorner = Instance.new("UICorner")
    selectCorner.CornerRadius = UDim.new(0,8)
    selectCorner.Parent = selectBtn

    -- Dropdown frame
    local dropdownFrame = Instance.new("Frame")
    dropdownFrame.Size = UDim2.new(1,-40,0,180)
    dropdownFrame.Position = UDim2.new(0,20,0,95)
    dropdownFrame.BackgroundColor3 = Color3.fromRGB(30,30,30)
    dropdownFrame.BorderSizePixel = 0
    dropdownFrame.ClipsDescendants = true
    dropdownFrame.Visible = false
    dropdownFrame.Parent = mainFrame

    local dropdownCorner = Instance.new("UICorner")
    dropdownCorner.CornerRadius = UDim.new(0,8)
    dropdownCorner.Parent = dropdownFrame

    local scrollingFrame = Instance.new("ScrollingFrame")
    scrollingFrame.Size = UDim2.new(1,-8,1,-8)
    scrollingFrame.Position = UDim2.new(0,4,0,4)
    scrollingFrame.BackgroundTransparency = 1
    scrollingFrame.ScrollBarThickness = 6
    scrollingFrame.Parent = dropdownFrame

    local uiList = Instance.new("UIListLayout")
    uiList.Parent = scrollingFrame
    uiList.Padding = UDim.new(0,4)

    -- Event list
    local eventNames = {
        "10B Visits","4th of July","Bombardiro Crocodilo","Chicleteira Bicicleteira",
        "Crab Rave","La Vacca Saturno Saturnita","Los Matteos","Nyan Cats",
        "Phase 1: Sleepy","Phase 2: Galaxy Introduction","Phase 3: Sammy's Base",
        "Phase 4: Mygame43","Phase 5: Sammy Snap","Raining Tacos","Rap Concert",
        "Sammyni Spyderini","Solar Flare","Tung Tung Attack","1MEvent","300K",
        "Brazil","Bubblegum","Candy","Concert","DulDulDul","Extinct","FatSammy","Galaxy Glitch"
    }

    local selectedEvent = "None"

    -- Populate dropdown
    for _, name in ipairs(eventNames) do
        local label = Instance.new("TextButton")
        label.Size = UDim2.new(1,-8,0,30)
        label.BackgroundColor3 = Color3.fromRGB(60,60,60)
        label.Text = name
        label.Font = Enum.Font.Gotham
        label.TextSize = 16
        label.TextColor3 = Color3.fromRGB(255,255,255)
        label.BorderSizePixel = 0
        label.Parent = scrollingFrame

        local c = Instance.new("UICorner")
        c.CornerRadius = UDim.new(0,6)
        c.Parent = label

        label.MouseButton1Click:Connect(function()
            selectedEvent = name
            selectBtn.Text = "Selected: "..name.." ▼"
            dropdownFrame.Visible = false
        end)

        label.MouseEnter:Connect(function()
            label.BackgroundColor3 = Color3.fromRGB(90,90,90)
        end)
        label.MouseLeave:Connect(function()
            label.BackgroundColor3 = Color3.fromRGB(60,60,60)
        end)
    end

    -- Dynamic scrolling
    scrollingFrame.CanvasSize = UDim2.new(0,0,0,uiList.AbsoluteContentSize.Y)
    uiList:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        scrollingFrame.CanvasSize = UDim2.new(0,0,0,uiList.AbsoluteContentSize.Y)
    end)

    -- Toggle dropdown
    local dropdownVisible = false
    selectBtn.MouseButton1Click:Connect(function()
        dropdownVisible = not dropdownVisible
        dropdownFrame.Visible = dropdownVisible
    end)

    -- Spawn event button
    local spawnBtn = Instance.new("TextButton")
    spawnBtn.Size = UDim2.new(1,-40,0,40)
    spawnBtn.Position = UDim2.new(0,20,1,-50)
    spawnBtn.BackgroundColor3 = Color3.fromRGB(255,100,100)
    spawnBtn.Text = "Spawn Event"
    spawnBtn.Font = Enum.Font.GothamBold
    spawnBtn.TextSize = 18
    spawnBtn.TextColor3 = Color3.fromRGB(255,255,255)
    spawnBtn.BorderSizePixel = 0
    spawnBtn.Parent = mainFrame

    local spawnCorner = Instance.new("UICorner")
    spawnCorner.CornerRadius = UDim.new(0,8)
    spawnCorner.Parent = spawnBtn

    -- Execute selected event
    spawnBtn.MouseButton1Click:Connect(function()
        if selectedEvent ~= "None" then
            local ok, err = sendInvokeExact("executeevent", {event = selectedEvent})
if ok then
    print("Executed Event:", selectedEvent)
else
    warn("Failed to execute Event:", err)
end

        else
            warn("No event selected!")
        end
    end)
end)

-- Add Money
addMoneyBtn.MouseButton1Click:Connect(function()
    addMoneyBtn.MouseButton1Click:Connect(function()
    local amount = parseNumber(moneyBox.Text)
    local ok, err = sendInvokeExact("setmoney", {money = amount})
    if ok then
        print("Money set to:", amount)
    else
        warn("Failed to set money:", err)
    end
end)

-- Set Rebirth
setRebirthBtn.MouseButton1Click:Connect(function()
    local rebirth = parseNumber(rebirthBox.Text)
    local ok, err = sendInvokeExact("setrebirth", {rebirth = rebirth})
    if ok then
        print("Rebirth set to:", rebirth)
    else
        warn("Failed to set rebirth:", err)
    end
end)


-- Spawn Brainrots
spawnBrainrotsBtn.MouseButton1Click:Connect(function()
    if game.CoreGui:FindFirstChild("SpawnBrainrotGUI") then
        game.CoreGui.SpawnBrainrotGUI:Destroy()
    end

    local popupGui = Instance.new("ScreenGui")
    popupGui.Name = "SpawnBrainrotGUI"
    popupGui.ResetOnSpawn = false
    popupGui.IgnoreGuiInset = true
    popupGui.Parent = game.CoreGui

    -- Outline frame
    local outlineFrame = Instance.new("Frame")
    outlineFrame.Size = UDim2.new(0, 450, 0, 220)
    outlineFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    outlineFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    outlineFrame.BackgroundColor3 = Color3.fromRGB(255,255,255)
    outlineFrame.BorderSizePixel = 0
    outlineFrame.Parent = popupGui

    local outlineCorner = Instance.new("UICorner")
    outlineCorner.CornerRadius = UDim.new(0, 10)
    outlineCorner.Parent = outlineFrame

    -- Main frame
    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(1, -6, 1, -6)
    mainFrame.Position = UDim2.new(0,3,0,3)
    mainFrame.BackgroundColor3 = Color3.fromRGB(40,40,40)
    mainFrame.BorderSizePixel = 0
    mainFrame.Parent = outlineFrame

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0,10)
    corner.Parent = mainFrame

    -- Title
    local title = Instance.new("TextLabel")
    title.Text = "Spawn Brainrots"
    title.Font = Enum.Font.GothamBold
    title.TextSize = 26
    title.TextColor3 = Color3.fromRGB(255,255,255)
    title.BackgroundTransparency = 1
    title.Position = UDim2.new(0.05,0,0.03,0)
    title.Size = UDim2.new(0.9,0,0,35)
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.Parent = mainFrame

    -- Name box
    local nameBox = Instance.new("TextBox")
    nameBox.PlaceholderText = "Type The Brainrot's Name"
    nameBox.Font = Enum.Font.Gotham
    nameBox.TextSize = 18
    nameBox.TextColor3 = Color3.fromRGB(255,255,255)
    nameBox.BackgroundColor3 = Color3.fromRGB(50,50,50)
    nameBox.Size = UDim2.new(0.9,0,0,50)
    nameBox.Position = UDim2.new(0.05,0,0.25,0)
    nameBox.Parent = mainFrame

    local nameCorner = Instance.new("UICorner")
    nameCorner.CornerRadius = UDim.new(0,8)
    nameCorner.Parent = nameBox

    -- Type box
    local typeBox = Instance.new("TextBox")
    typeBox.Text = "Normal"
    typeBox.Font = Enum.Font.Gotham
    typeBox.TextSize = 18
    typeBox.TextColor3 = Color3.fromRGB(255,255,255)
    typeBox.BackgroundColor3 = Color3.fromRGB(50,50,50)
    typeBox.Size = UDim2.new(0.4,0,0,45)
    typeBox.Position = UDim2.new(0.05,0,0.65,0)
    typeBox.Parent = mainFrame

    local typeCorner = Instance.new("UICorner")
    typeCorner.CornerRadius = UDim.new(0,8)
    typeCorner.Parent = typeBox

    -- Spawn button
    local spawnBtn = Instance.new("TextButton")
    spawnBtn.Text = "SPAWN"
    spawnBtn.Font = Enum.Font.GothamBold
    spawnBtn.TextSize = 18
    spawnBtn.TextColor3 = Color3.fromRGB(255,255,255)
    spawnBtn.BackgroundColor3 = Color3.fromRGB(255,100,100)
    spawnBtn.Size = UDim2.new(0.45,0,0,45)
    spawnBtn.Position = UDim2.new(0.52,0,0.65,0)
    spawnBtn.Parent = mainFrame

    local spawnCorner = Instance.new("UICorner")
    spawnCorner.CornerRadius = UDim.new(0,8)
    spawnCorner.Parent = spawnBtn

    spawnBtn.MouseEnter:Connect(function() spawnBtn.BackgroundColor3 = Color3.fromRGB(255,80,80) end)
    spawnBtn.MouseLeave:Connect(function() spawnBtn.BackgroundColor3 = Color3.fromRGB(255,100,100) end)

    -- Close button
    local closeBtn = Instance.new("TextButton")
    closeBtn.Size = UDim2.new(0,36,0,28)
    closeBtn.Position = UDim2.new(1,-44,0,8)
    closeBtn.BackgroundColor3 = Color3.fromRGB(180,30,30)
    closeBtn.Text = "×"
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.TextSize = 18
    closeBtn.TextColor3 = Color3.fromRGB(255,255,255)
    closeBtn.BorderSizePixel = 0
    closeBtn.Parent = mainFrame

    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0,6)
    closeCorner.Parent = closeBtn

    closeBtn.MouseButton1Click:Connect(function()
        popupGui:Destroy()
    end)

    -- Spawn action
    spawnBtn.MouseButton1Click:Connect(function()
        print("Spawned Brainrot:", nameBox.Text, "Type:", typeBox.Text)
        -- Here you can call your `sendInvokeExact("spawnbrainrot",{name=..., type=...})`
    end)
end)


-- Spawn Lucky Block
spawnLuckyBlockBtn.MouseButton1Click:Connect(function()
    local amount = 1 -- default

    -- Destroy existing GUI if it exists
    if game.CoreGui:FindFirstChild("SpawnLuckyBlockGUI") then
        game.CoreGui.SpawnLuckyBlockGUI:Destroy()
    end

    -- Create the GUI
    local TweenService = game:GetService("TweenService")
    local UserInputService = game:GetService("UserInputService")

    local popupGui = Instance.new("ScreenGui")
    popupGui.Name = "SpawnLuckyBlockGUI"
    popupGui.ResetOnSpawn = false
    popupGui.IgnoreGuiInset = true
    popupGui.Parent = game.CoreGui

    local outlineFrame = Instance.new("Frame")
    outlineFrame.Size = UDim2.new(0, 450, 0, 220)
    outlineFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    outlineFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    outlineFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    outlineFrame.BorderSizePixel = 0
    outlineFrame.Parent = popupGui

    local outlineCorner = Instance.new("UICorner")
    outlineCorner.CornerRadius = UDim.new(0, 10)
    outlineCorner.Parent = outlineFrame

    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(1, -6, 1, -6)
    mainFrame.Position = UDim2.new(0, 3, 0, 3)
    mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    mainFrame.BorderSizePixel = 0
    mainFrame.Parent = outlineFrame

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 10)
    corner.Parent = mainFrame

    local title = Instance.new("TextLabel")
    title.Text = "Spawn Lucky Blocks"
    title.Font = Enum.Font.GothamBold
    title.TextSize = 26
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.BackgroundTransparency = 1
    title.Position = UDim2.new(0.05, 0, 0.03, 0)
    title.Size = UDim2.new(0.9, 0, 0, 35)
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.Parent = mainFrame

    local typeBox = Instance.new("TextBox")
    typeBox.Text = "Type the Lucky Block"
    typeBox.Font = Enum.Font.Gotham
    typeBox.TextSize = 18
    typeBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    typeBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    typeBox.Size = UDim2.new(0.9, 0, 0, 50)
    typeBox.Position = UDim2.new(0.05, 0, 0.25, 0)
    typeBox.Parent = mainFrame

    local nameCorner = Instance.new("UICorner")
    nameCorner.CornerRadius = UDim.new(0, 8)
    nameCorner.Parent = typeBox

    local amountBox = Instance.new("TextBox")
    amountBox.Text = "1" -- default numeric value
    amountBox.Font = Enum.Font.Gotham
    amountBox.TextSize = 18
    amountBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    amountBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    amountBox.Size = UDim2.new(0.4, 0, 0, 45)
    amountBox.Position = UDim2.new(0.05, 0, 0.65, 0)
    amountBox.Parent = mainFrame

    local amountCorner = Instance.new("UICorner")
    amountCorner.CornerRadius = UDim.new(0, 8)
    amountCorner.Parent = amountBox

    local spawnBtn = Instance.new("TextButton")
    spawnBtn.Text = "SPAWN"
    spawnBtn.Font = Enum.Font.GothamBold
    spawnBtn.TextSize = 18
    spawnBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    spawnBtn.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
    spawnBtn.Size = UDim2.new(0.45, 0, 0, 45)
    spawnBtn.Position = UDim2.new(0.52, 0, 0.65, 0)
    spawnBtn.Parent = mainFrame

    local spawnCorner = Instance.new("UICorner")
    spawnCorner.CornerRadius = UDim.new(0, 8)
    spawnCorner.Parent = spawnBtn

    spawnBtn.MouseEnter:Connect(function()
        spawnBtn.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
    end)
    spawnBtn.MouseLeave:Connect(function()
        spawnBtn.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
    end)

    local closeBtn = Instance.new("TextButton")
    closeBtn.Size = UDim2.new(0, 36, 0, 28)
    closeBtn.Position = UDim2.new(1, -44, 0, 8)
    closeBtn.BackgroundColor3 = Color3.fromRGB(180, 30, 30)
    closeBtn.Text = "×"
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.TextSize = 18
    closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeBtn.BorderSizePixel = 0
    closeBtn.Parent = mainFrame

    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 6)
    closeCorner.Parent = closeBtn

    closeBtn.MouseButton1Click:Connect(function()
        popupGui:Destroy()
    end)

    spawnBtn.MouseButton1Click:Connect(function()
        local blockType = typeBox.Text
local blockAmount = tonumber(amountBox.Text) or 1

if blockType ~= "" then
    local ok, err = sendInvokeExact("spawnluckyblock", {type = blockType, amount = blockAmount})
    if ok then
        print("Spawned Lucky Block:", blockType, "Amount:", blockAmount)
    else
        warn("Failed to spawn Lucky Block:", err)
    end
else
    warn("Please enter a Lucky Block type!")
end

    -- Make draggable
    local dragging, dragInput, dragStart, startPos
    local function update(input)
        local delta = input.Position - dragStart
        outlineFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end

    outlineFrame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = outlineFrame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    outlineFrame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            update(input)
        end
    end)
end)
